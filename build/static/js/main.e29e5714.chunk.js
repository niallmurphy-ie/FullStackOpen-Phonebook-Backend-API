(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n.n(r),a=n(3),s=n(1),o=n(0),u=function(e){var t=e.searchTerm,n=e.handleSearchChange;return Object(o.jsxs)("div",{children:["Filter using: ",Object(o.jsx)("input",{value:t,onChange:n})]})},d=n(4),i=n.n(d),l="/api/persons",h={getRecords:function(){return i.a.get(l).then((function(e){return e.data}))},postRecord:function(e){return i.a.post(l,e).then((function(e){return e.data}))},deleteRecord:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updateRecord:function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},b=function(e){var t=e.newName,n=e.handleNumberChange,r=e.newNumber,c=e.handleNameChange,a=e.handleNameAdd;return Object(o.jsxs)("form",{onSubmit:a,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:c,type:"text"})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:n,type:"text"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.person,n=e.handleRecordDelete;return Object(o.jsxs)("div",{children:[t.name,": ",t.number," ",Object(o.jsx)("button",{onClick:function(){return n(t.id)},children:"delete"})]})},f=function(e){var t=e.searchResults,n=e.persons,r=e.handleRecordDelete,c=e.searchTerm;return 0===t.length&&c.length>0?Object(o.jsx)("div",{children:"There are no results for this search term"}):t.length>0?Object(o.jsx)(o.Fragment,{children:t.map((function(e){return Object(o.jsx)(j,{person:e,handleRecordDelete:r},e.id)}))}):0===t.length&&0===c.length?Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsx)(j,{person:e,handleRecordDelete:r},e.id)}))}):void 0},m=function(e){switch(e){case"success":return{background:"lightgreen",color:"green",fontStyle:"italic",fontSize:"16px",padding:"20px",border:"solid 5px"};case"error":return{background:"lightred",color:"red",fontStyle:"italic",fontSize:"16px",padding:"20px",border:"solid 5px"};default:return{}}},p=function(e){var t=e.message,n=e.type,r=m(n);return null===t||""===t?null:Object(o.jsx)("div",{style:r,className:n,children:t})},g=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(""),d=Object(a.a)(c,2),i=d[0],l=d[1],j=Object(s.useState)(""),m=Object(a.a)(j,2),g=m[0],O=m[1],x=Object(s.useState)(""),v=Object(a.a)(x,2),y=v[0],R=v[1],w=Object(s.useState)([]),S=Object(a.a)(w,2),C=S[0],N=S[1],T=Object(s.useState)({message:"",type:""}),k=Object(a.a)(T,2),D=k[0],E=k[1];Object(s.useEffect)((function(){""!==D.message&&setTimeout((function(){E({message:"",type:""})}),5e3)}),[D]);var A=function(){h.getRecords().then((function(e){return r(e)}))};Object(s.useEffect)(A,[]);Object(s.useEffect)((function(){N([]),R(""),l(""),O("")}),[n]);var F=function(e){h.postRecord(e).then((function(e){r(n.concat(e)),E({message:"A record has been created for ".concat(e.name),type:"success"})}))},z=function(e,t){window.confirm("".concat(t.name," has already been added. Do you want to update this person's number?"))&&h.updateRecord(e,t).then((function(t){r(n.map((function(n){return n.id===e?t:n}))),E({message:"".concat(t.name,"'s record has been updated."),type:"success"})})).catch((function(){E({message:"This record has already been deleted.",type:"error"}),A()}))},J=function(){return n.filter((function(e){return e.name===i}))};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(p,{message:D.message,type:D.type}),Object(o.jsx)("h3",{children:"Search"}),Object(o.jsx)(u,{searchTerm:y,handleSearchChange:function(e){var t=e.target.value,r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));R(t),N(r)}}),Object(o.jsx)("h2",{children:"Add Record"}),Object(o.jsx)(b,{newName:i,handleNumberChange:function(e){return O(e.target.value)},newNumber:g,handleNameChange:function(e){return l(e.target.value)},handleNameAdd:function(e){e.preventDefault(),console.log("EVENT TARGET",e.target),""!==i&&""!==g||alert("Please enter a name and number");var t={name:i,number:g},n=J();n.length>0?z(n[0].id,t):F(t)}}),Object(o.jsx)("h3",{children:"Results"}),Object(o.jsx)(f,{searchResults:C,persons:n,handleRecordDelete:function(e){var t=n.filter((function(t){return e===t.id}));window.confirm("Delete ".concat(t[0].name,"?"))&&h.deleteRecord(e).then((function(){r(n.filter((function(t){return t.id!==e?t:null}))),E({message:"Record has been deleted",type:"success"})})).catch((function(){E({message:"This record has already been deleted.",type:"error"}),A()}))},searchTerm:y})]})};n(38);c.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e29e5714.chunk.js.map